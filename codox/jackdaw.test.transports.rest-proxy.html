<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>jackdaw.test.transports.rest-proxy documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Jackdaw</span> <span class="project-version">0.6.1-gh-pages-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="test-machine.html"><div class="inner"><span>The Test Machine</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>jackdaw</span></div></div></li><li class="depth-2 branch"><a href="jackdaw.admin.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>admin</span></div></a></li><li class="depth-2"><a href="jackdaw.client.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>client</span></div></a></li><li class="depth-3 branch"><a href="jackdaw.client.log.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>log</span></div></a></li><li class="depth-3"><a href="jackdaw.client.partitioning.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>partitioning</span></div></a></li><li class="depth-2 branch"><a href="jackdaw.data.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>data</span></div></a></li><li class="depth-2"><a href="jackdaw.serdes.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>serdes</span></div></a></li><li class="depth-3"><a href="jackdaw.serdes.avro.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>avro</span></div></a></li><li class="depth-4 branch"><a href="jackdaw.serdes.avro.confluent.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>confluent</span></div></a></li><li class="depth-4"><a href="jackdaw.serdes.avro.schema-registry.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>schema-registry</span></div></a></li><li class="depth-3 branch"><a href="jackdaw.serdes.edn.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>edn</span></div></a></li><li class="depth-3 branch"><a href="jackdaw.serdes.fn.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>fn</span></div></a></li><li class="depth-3 branch"><a href="jackdaw.serdes.fn-impl.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>fn-impl</span></div></a></li><li class="depth-3 branch"><a href="jackdaw.serdes.json.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>json</span></div></a></li><li class="depth-3"><a href="jackdaw.serdes.resolver.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>resolver</span></div></a></li><li class="depth-2 branch"><a href="jackdaw.specs.html"><div class="inner"><span class="tree" style="top: -269px;"><span class="top" style="height: 278px;"></span><span class="bottom"></span></span><span>specs</span></div></a></li><li class="depth-2"><a href="jackdaw.streams.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>streams</span></div></a></li><li class="depth-3 branch"><a href="jackdaw.streams.configurable.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>configurable</span></div></a></li><li class="depth-3 branch"><a href="jackdaw.streams.configured.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>configured</span></div></a></li><li class="depth-3 branch"><a href="jackdaw.streams.extras.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>extras</span></div></a></li><li class="depth-3 branch"><a href="jackdaw.streams.interop.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>interop</span></div></a></li><li class="depth-3"><a href="jackdaw.streams.lambdas.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>lambdas</span></div></a></li><li class="depth-4"><a href="jackdaw.streams.lambdas.specs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>specs</span></div></a></li><li class="depth-3 branch"><a href="jackdaw.streams.mock.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>mock</span></div></a></li><li class="depth-3 branch"><a href="jackdaw.streams.protocols.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>protocols</span></div></a></li><li class="depth-3"><a href="jackdaw.streams.specs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>specs</span></div></a></li><li class="depth-2"><a href="jackdaw.test.html"><div class="inner"><span class="tree" style="top: -300px;"><span class="top" style="height: 309px;"></span><span class="bottom"></span></span><span>test</span></div></a></li><li class="depth-3"><a href="jackdaw.test.commands.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>commands</span></div></a></li><li class="depth-4 branch"><a href="jackdaw.test.commands.base.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>base</span></div></a></li><li class="depth-4 branch"><a href="jackdaw.test.commands.watch.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>watch</span></div></a></li><li class="depth-4"><a href="jackdaw.test.commands.write.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>write</span></div></a></li><li class="depth-3 branch"><a href="jackdaw.test.fixtures.html"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>fixtures</span></div></a></li><li class="depth-3 branch"><a href="jackdaw.test.journal.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>journal</span></div></a></li><li class="depth-3 branch"><a href="jackdaw.test.middleware.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>middleware</span></div></a></li><li class="depth-3 branch"><a href="jackdaw.test.serde.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>serde</span></div></a></li><li class="depth-3"><a href="jackdaw.test.transports.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>transports</span></div></a></li><li class="depth-4 branch"><a href="jackdaw.test.transports.identity.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>identity</span></div></a></li><li class="depth-4 branch"><a href="jackdaw.test.transports.kafka.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>kafka</span></div></a></li><li class="depth-4 branch"><a href="jackdaw.test.transports.mock.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>mock</span></div></a></li><li class="depth-4 current"><a href="jackdaw.test.transports.rest-proxy.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>rest-proxy</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="jackdaw.test.transports.rest-proxy.html#var-build-record"><div class="inner"><span>build-record</span></div></a></li><li class="depth-1"><a href="jackdaw.test.transports.rest-proxy.html#var-content-types"><div class="inner"><span>content-types</span></div></a></li><li class="depth-1"><a href="jackdaw.test.transports.rest-proxy.html#var-deliver-ack"><div class="inner"><span>deliver-ack</span></div></a></li><li class="depth-1"><a href="jackdaw.test.transports.rest-proxy.html#var-destroy-consumer"><div class="inner"><span>destroy-consumer</span></div></a></li><li class="depth-1"><a href="jackdaw.test.transports.rest-proxy.html#var-handle-proxy-request"><div class="inner"><span>handle-proxy-request</span></div></a></li><li class="depth-1"><a href="jackdaw.test.transports.rest-proxy.html#var-ok.3F"><div class="inner"><span>ok?</span></div></a></li><li class="depth-1"><a href="jackdaw.test.transports.rest-proxy.html#var-proxy-client-info"><div class="inner"><span>proxy-client-info</span></div></a></li><li class="depth-1"><a href="jackdaw.test.transports.rest-proxy.html#var-rest-proxy-client"><div class="inner"><span>rest-proxy-client</span></div></a></li><li class="depth-1"><a href="jackdaw.test.transports.rest-proxy.html#var-rest-proxy-consumer"><div class="inner"><span>rest-proxy-consumer</span></div></a></li><li class="depth-1"><a href="jackdaw.test.transports.rest-proxy.html#var-rest-proxy-headers"><div class="inner"><span>rest-proxy-headers</span></div></a></li><li class="depth-1"><a href="jackdaw.test.transports.rest-proxy.html#var-rest-proxy-poller"><div class="inner"><span>rest-proxy-poller</span></div></a></li><li class="depth-1"><a href="jackdaw.test.transports.rest-proxy.html#var-rest-proxy-producer"><div class="inner"><span>rest-proxy-producer</span></div></a></li><li class="depth-1"><a href="jackdaw.test.transports.rest-proxy.html#var-rest-proxy-subscription"><div class="inner"><span>rest-proxy-subscription</span></div></a></li><li class="depth-1"><a href="jackdaw.test.transports.rest-proxy.html#var-topic-post"><div class="inner"><span>topic-post</span></div></a></li><li class="depth-1"><a href="jackdaw.test.transports.rest-proxy.html#var-undatafy-record"><div class="inner"><span>undatafy-record</span></div></a></li><li class="depth-1"><a href="jackdaw.test.transports.rest-proxy.html#var-uuid"><div class="inner"><span>uuid</span></div></a></li><li class="depth-1"><a href="jackdaw.test.transports.rest-proxy.html#var-with-consumer"><div class="inner"><span>with-consumer</span></div></a></li><li class="depth-1"><a href="jackdaw.test.transports.rest-proxy.html#var-with-subscription"><div class="inner"><span>with-subscription</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">jackdaw.test.transports.rest-proxy</h1><div class="doc"><pre class="plaintext"></pre></div><div class="public anchor" id="var-build-record"><h3>build-record</h3><div class="usage"><code>(build-record m)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="http://github.com/fundingcircle/jackdaw/blob/0.6.1-gh-pages-SNAPSHOT/src/jackdaw/test/transports/rest_proxy.clj#L236">view source</a></div></div><div class="public anchor" id="var-content-types"><h3>content-types</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="http://github.com/fundingcircle/jackdaw/blob/0.6.1-gh-pages-SNAPSHOT/src/jackdaw/test/transports/rest_proxy.clj#L44">view source</a></div></div><div class="public anchor" id="var-deliver-ack"><h3>deliver-ack</h3><div class="usage"><code>(deliver-ack ack)</code></div><div class="doc"><pre class="plaintext">Deliver the `ack` promise with the result of attempting to write to kafka. The
default command-handler waits for this before on to the next command so the
test response may indicate the success/failure of each write command.</pre></div><div class="src-link"><a href="http://github.com/fundingcircle/jackdaw/blob/0.6.1-gh-pages-SNAPSHOT/src/jackdaw/test/transports/rest_proxy.clj#L243">view source</a></div></div><div class="public anchor" id="var-destroy-consumer"><h3>destroy-consumer</h3><div class="usage"><code>(destroy-consumer {:keys [base-uri]})</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="http://github.com/fundingcircle/jackdaw/blob/0.6.1-gh-pages-SNAPSHOT/src/jackdaw/test/transports/rest_proxy.clj#L94">view source</a></div></div><div class="public anchor" id="var-handle-proxy-request"><h3>handle-proxy-request</h3><div class="usage"><code>(handle-proxy-request method url headers body)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="http://github.com/fundingcircle/jackdaw/blob/0.6.1-gh-pages-SNAPSHOT/src/jackdaw/test/transports/rest_proxy.clj#L53">view source</a></div></div><div class="public anchor" id="var-ok.3F"><h3>ok?</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="http://github.com/fundingcircle/jackdaw/blob/0.6.1-gh-pages-SNAPSHOT/src/jackdaw/test/transports/rest_proxy.clj#L19">view source</a></div></div><div class="public anchor" id="var-proxy-client-info"><h3>proxy-client-info</h3><div class="usage"><code>(proxy-client-info client)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="http://github.com/fundingcircle/jackdaw/blob/0.6.1-gh-pages-SNAPSHOT/src/jackdaw/test/transports/rest_proxy.clj#L127">view source</a></div></div><div class="public anchor" id="var-rest-proxy-client"><h3>rest-proxy-client</h3><div class="usage"><code>(rest-proxy-client config)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="http://github.com/fundingcircle/jackdaw/blob/0.6.1-gh-pages-SNAPSHOT/src/jackdaw/test/transports/rest_proxy.clj#L133">view source</a></div></div><div class="public anchor" id="var-rest-proxy-consumer"><h3>rest-proxy-consumer</h3><div class="usage"><code>(rest-proxy-consumer config topic-metadata deserializers)</code></div><div class="doc"><pre class="plaintext">Creates an asynchronous Kafka Consumer of all topics defined in the
supplied `topic-metadata`

Puts all messages on the channel in the returned response. It is the
responsibility of the caller to arrange for the read the channel to
be read by some other process.

Must be closed with `close-consumer` when no longer required</pre></div><div class="src-link"><a href="http://github.com/fundingcircle/jackdaw/blob/0.6.1-gh-pages-SNAPSHOT/src/jackdaw/test/transports/rest_proxy.clj#L197">view source</a></div></div><div class="public anchor" id="var-rest-proxy-headers"><h3>rest-proxy-headers</h3><div class="usage"><code>(rest-proxy-headers accept)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="http://github.com/fundingcircle/jackdaw/blob/0.6.1-gh-pages-SNAPSHOT/src/jackdaw/test/transports/rest_proxy.clj#L48">view source</a></div></div><div class="public anchor" id="var-rest-proxy-poller"><h3>rest-proxy-poller</h3><div class="usage"><code>(rest-proxy-poller messages)</code></div><div class="doc"><pre class="plaintext">Returns a function that takes a consumer and puts any messages retrieved
by polling it onto the supplied `messages` channel</pre></div><div class="src-link"><a href="http://github.com/fundingcircle/jackdaw/blob/0.6.1-gh-pages-SNAPSHOT/src/jackdaw/test/transports/rest_proxy.clj#L176">view source</a></div></div><div class="public anchor" id="var-rest-proxy-producer"><h3>rest-proxy-producer</h3><div class="usage"><code>(rest-proxy-producer config topics serializers)</code></div><div class="doc"><pre class="plaintext">Creates an asynchronous kafka producer to be used by a test-machine for for
injecting test messages</pre></div><div class="src-link"><a href="http://github.com/fundingcircle/jackdaw/blob/0.6.1-gh-pages-SNAPSHOT/src/jackdaw/test/transports/rest_proxy.clj#L258">view source</a></div></div><div class="public anchor" id="var-rest-proxy-subscription"><h3>rest-proxy-subscription</h3><div class="usage"><code>(rest-proxy-subscription config topic-metadata)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="http://github.com/fundingcircle/jackdaw/blob/0.6.1-gh-pages-SNAPSHOT/src/jackdaw/test/transports/rest_proxy.clj#L191">view source</a></div></div><div class="public anchor" id="var-topic-post"><h3>topic-post</h3><div class="usage"><code>(topic-post {:keys [bootstrap-uri]} msg callback)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="http://github.com/fundingcircle/jackdaw/blob/0.6.1-gh-pages-SNAPSHOT/src/jackdaw/test/transports/rest_proxy.clj#L103">view source</a></div></div><div class="public anchor" id="var-undatafy-record"><h3>undatafy-record</h3><div class="usage"><code>(undatafy-record topic-metadata m)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="http://github.com/fundingcircle/jackdaw/blob/0.6.1-gh-pages-SNAPSHOT/src/jackdaw/test/transports/rest_proxy.clj#L37">view source</a></div></div><div class="public anchor" id="var-uuid"><h3>uuid</h3><div class="usage"><code>(uuid)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="http://github.com/fundingcircle/jackdaw/blob/0.6.1-gh-pages-SNAPSHOT/src/jackdaw/test/transports/rest_proxy.clj#L21">view source</a></div></div><div class="public anchor" id="var-with-consumer"><h3>with-consumer</h3><div class="usage"><code>(with-consumer {:keys [bootstrap-uri group-id], :as client})</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="http://github.com/fundingcircle/jackdaw/blob/0.6.1-gh-pages-SNAPSHOT/src/jackdaw/test/transports/rest_proxy.clj#L137">view source</a></div></div><div class="public anchor" id="var-with-subscription"><h3>with-subscription</h3><div class="usage"><code>(with-subscription {:keys [base-uri group-id instance-id], :as client} topic-metadata)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="http://github.com/fundingcircle/jackdaw/blob/0.6.1-gh-pages-SNAPSHOT/src/jackdaw/test/transports/rest_proxy.clj#L163">view source</a></div></div></div></body></html>